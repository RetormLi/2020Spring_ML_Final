## 关于数据

### 交通拥堵指数数据（train_TTI.csv）

-   id_road：枚举，路段编号
-   TTI：浮点，拥堵指数
-   speed：浮点，平均车速
-   time：时间，记录时间

### 网约车轨迹数据

-   id_order：字符串，订单编号
-   id_user：字符串，司机编号
-   gps_records：五个字段一组
    -   lng：经度
    -   lat：纬度
    -   speed：速度
    -   direction：方向
    -   time：记录时间

## 目前的一些参考

https://kns.cnki.net/KCMS/detail/detail.aspx?dbcode=CMFD&dbname=CMFD201701&filename=1016915036.nh&v=MTI5MTBIUHFaRWJQSVI4ZVgxTHV4WVM3RGgxVDNxVHJXTTFGckNVUjdxZlllWnNGQ2prVmI3T1ZGMjZHTHE1Rzk=

基于出租车GPS数据的城市交通拥堵识别和关联性分析

https://github.com/Michelia-zhx/Huaweicloud_Competition_Traffic/blob/master/clean_data

某个人的源代码

## 一些想法
首先，速度是最简单，也是最有效的特征。

关键在于地理位置，和街道的欧氏（曼哈顿？）距离，以及确定车辆的团簇

时间可能也是一个重要的指标，比如上下班时间可能堵车。但是又要防止学习器只学习时间导致过拟合。

可以取距离街道在某一个曼哈顿距离的范数圆中的所有车辆，车辆总数，计算数量，平均速度等等。范数圆是否够好呢？街道是狭长的区域。（但也许并不需要那么复杂）

取所有车辆的时候要注意样本是一辆车的轨迹，所以计算车辆相关的属性时需要有点技巧。

在生成样本集的时候，采取怎样的时间截面是一个问题。截面太小容易漏掉一些车，界面太大同一辆车会多次出现。

要注意如果要将一些样本的曼哈顿距离加和的话，要考虑车辆的数量。但又要注意本来距离和大的话，就蕴含车辆数的信息。

另外一个问题是真的要考虑加和曼哈顿距离吗？有必要考虑车辆和街道的距离吗？或者说用于车辆的加权？要考虑一下现实的情况。

当前街道的tti也和附近的街道的tti相关。同样，当前街道和附近街道的速度特征也是都要考虑的。

## 存在的疑问
utc时间？



## feature
时间、车辆数、平均速度、附近街道的tti、同一街道前段时间的tti、（路口延误时间）

## 一些想法

#关于街道和轨迹切分：

因为街道是狭长的区域，取范数会不会不太符合？比如一辆车在隔壁街道上，但在这条街的一个范数圆内，那他也会算在这条街里。而且街道是狭长的，感觉圆心没有合适的取法？

我想的是将街道看成一个平行四边形，取四个顶点的经纬度，然后把车辆轨迹的经纬度和街道比较，在街道内就把这条轨迹加入街道。

若轨迹中的相邻两点的经纬度不在一个范围内，切分轨迹；若相邻两点的时间戳不在同一时间段，切分轨迹。

这样的话，一辆车的轨迹应该会在不同时间段切入不同的街道。

基于此，再计算车辆数、平均速度等。

但是一个问题就是路口算哪条街道？把路口平分，然后放到相邻两条街道中吗。。

#关于平均速度的计算：

顺时速度：所有瞬时速度的平均

行程速度：一条切分轨迹上进入点和离开点的经纬度差计算的欧氏距离/时间戳间隔的平均

感觉后者更合理些？或者都试试，看效果。

#关于轨迹的处理（一些特殊情况）：

剔除超速、GPS异常等等。

要考虑等红绿灯的车速和延误时间吗？要不要和其他车速分开分析，考虑到红绿灯间隔应该是固定的，应该能从数据中提取出每条街道的红绿灯时间长度和间隔（经纬度靠近路口，且该时间段多辆车的速度均接近0；看这些数据的时间间隔的规律如何）。

这样的话可以把路口左转、右转、直行的延误时间作为指标。还有要把等红绿灯的车速从上面计算的平均车速剔除么？

关于速度的处理，可以参考第二篇第四章，不过有点麻烦，不一定要完全照着来orz但这篇文章就不用先切分轨迹了，直接看相邻两点是否属于同一街道，再根据路口、街道内部等不同情况有不同的计算公式。路口的延误时间可参考4.2节。

#关于时间截面：

先看看轨迹中时间戳的间隔是多久?

##另外：

当前街道的tti也和前十分钟/半小时……的tti有关。

除了路口时判断转向，车的方向有什么作用？

train_TTI中的speed怎么用？

## 补充参考：

https://wenku.baidu.com/view/e86312715b8102d276a20029bd64783e09127d19.html

基于出租车GPS数据的城市道路拥堵判别_郭雪婷

https://kns.cnki.net/KCMS/detail/detail.aspx?dbcode=CMFD&dbname=CMFD201601&filename=1015803065.nh&v=MDEwMzRFYlBJUjhlWDFMdXhZUzdEaDFUM3FUcldNMUZyQ1VSN3FmWWVacEZ5bmdXcjdLVkYyNkc3dTRIZEhLcXA=

基于出租车GPS数据的道路交通运行状态判别

第一篇：将街道切成平行四边形，通过经纬度比较划分轨迹。

第二篇：可以看下第二章关于街道交通流的特点分析、第四章关于速度的计算。